<script type="text/javascript">
  RED.nodes.registerType('warp10', {
    category: 'config',
    color: '#db8923',
    icon: "font-awesome/fa-database",
    defaults: {
      endpoint: { value: "", required: true },
      token: { value: "", required: true },
    },
    label: function () {
      return (new URL(this.endpoint)).hostname
    },
    oneditprepare: function () {
      $("#node-config-input-endpoint").typedInput({
        type: "str",
        types: ["str", "env", "cred"],
        typeField: "#node-input-endpoint-type"
      })

      $("#node-config-input-token").typedInput({
        type: "str",
        types: ["str", "env", "cred"],
        typeField: "#node-input-token-type"
      })
    }
  });
</script>

<script type="text/html" data-template-name="warp10">
  <div class="form-row">
    <label for="node-config-input-endpoint"><i class="fa fa-plug"></i> Endpoint</label>
    <input type="text" id="node-config-input-endpoint" placeholder="http://my.endpoint/api/v0/update">
  </div>
  <div class="form-row">
    <label for="node-config-input-token"><i class="fa fa-vcard"></i> Token</label>
    <input type="text" id="node-config-input-token">
  </div>
</script>

<script type="text/html" data-help-name="warp10">
  <p>A node for configuring warp10 connections.</p>

  <ul>
    <li><strong>Endpoint</strong> : The endpoint used for warp10 ingestion with an HTTP POST request.</li>
    <li><strong>Token</strong> : The token used for the request (into the <code>X-Warp10-Token</code> header).</li>
  </ul>
</script>